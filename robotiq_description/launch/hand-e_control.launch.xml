<launch>
  <arg name="runtime_config_package"
       default="robotiq_description"
       description="Package with the controller's configuration in 'config' folder. Usually the argument is not set, it enables use of a custom setup."/>
  <arg name="controllers_file"
       default="robotiq_hand_e_controllers"
       description="YAML file (without extension) with the controllers configuration."/>
  <arg name="description_package"
       default="robotiq_description"
       description="Description package with robot URDF/xacro files. Usually the argument is not set, it enables use of a custom description."/>
  <arg name="description_file"
       default="robotiq_hand_e_gripper"
       description="URDF/XACRO description file (without extension) with the robot."/>
  <arg name="prefix"
       default=""
       description="Prefix of the joint names, useful for multi-robot setup. If changed than also joint names in the controllers' configuration have to be updated."/>
  <arg name="use_mock_hardware"
       default="false"
       description="Start robot with mock hardware mirroring command to its states."/>
  <arg name="mock_sensor_commands"
       default="false"
       description="Enable mock command interfaces for sensors used for simple simulations. Used only if 'use_mock_hardware' parameter is true."/>

  <let name="robot_description_content" value="$(command '$(find-exec xacro) $(find-pkg-share $(var description_package))/urdf/$(var description_file).urdf.xacro prefix:=$(var prefix) use_mock_hardware:=$(var use_mock_hardware) mock_sensor_commands:=$(var mock_sensor_commands)')"/>


  <!--robot_state_pub_node-->
  <node pkg="robot_state_publisher" exec="robot_state_publisher" output="both">
    <param name="robot_description" value="$(var robot_description_content)"/>
  </node>

  <!--control_node-->
  <node pkg="controller_manager" exec="ros2_control_node" output="both">
    <param from="$(find-pkg-share $(var runtime_config_package))/config/$(var controllers_file).yaml"/>
  </node>

  <!--rviz_node-->
  <node pkg="rviz2" exec="rviz2" output="log" args="-d $(find-pkg-share $(var description_package))/rviz/view_urdf.rviz"/>

  <!--joint_state_braodcaster_spawner-->
  <node pkg="controller_manager" exec="spawner" args="joint_state_broadcaster"/>

  <!-- Robotiq Activation Controller spawner -->
  <node pkg="controller_manager" exec="spawner" args="robotiq_activation_controller"/>

  <!-- Robotiq Gripper Controller spawner -->
  <node pkg="controller_manager" exec="spawner" args="robotiq_gripper_controller"/>

</launch>
